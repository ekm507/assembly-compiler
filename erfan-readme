alloc arrays dynamically after getting file size

